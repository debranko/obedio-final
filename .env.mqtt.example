# =================================================================
# OBEDIO MQTT MONITOR & CONTROL SYSTEM
# Environment Configuration Template
# =================================================================

# GENERAL SETTINGS
# =================================================================
NODE_ENV=production
LOG_LEVEL=info
TZ=UTC

# DATABASE CONFIGURATION
# =================================================================
# PostgreSQL Database Settings
POSTGRES_DB=obedio
POSTGRES_USER=obedio_user
POSTGRES_PASSWORD=obedio_secure_password_2024_change_in_production
POSTGRES_INITDB_ARGS=--encoding=UTF8 --locale=C

# Database Connection URL (used by applications)
DATABASE_URL=postgresql://obedio_user:${POSTGRES_PASSWORD}@postgresql:5432/obedio

# REDIS CONFIGURATION
# =================================================================
# Redis Cache Settings
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=
REDIS_MAX_MEMORY=256mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# MQTT BROKER CONFIGURATION
# =================================================================
# Mosquitto Broker Settings
MQTT_BROKER_URL=mqtt://mosquitto:1883
MQTT_BROKER_WS_URL=ws://mosquitto:9001
MQTT_BROKER_TLS_URL=mqtts://mosquitto:8883
MQTT_LOG_LEVEL=notice

# MQTT Service Accounts
MQTT_USERNAME=obedio-api-service
MQTT_PASSWORD=generate_secure_password_here
MQTT_CLIENT_ID=obedio-backend-api

# MQTT ADMIN API CONFIGURATION
# =================================================================
# API Server Settings
API_PORT=4001
API_HOST=0.0.0.0

# Security Settings
JWT_SECRET=your_jwt_secret_key_minimum_32_characters_change_in_production
ENCRYPTION_KEY=your_32_char_encryption_key_here_xyz
API_KEY=your_api_key_for_authentication_here

# Authentication & Authorization
ENABLE_API_AUTH=false
ENABLE_TLS=false
CERT_PATH=/app/certs

# SECURITY & CERTIFICATES
# =================================================================
# TLS/SSL Configuration
SSL_CERT_PATH=/mosquitto/certs/server.crt
SSL_KEY_PATH=/mosquitto/certs/server.key
SSL_CA_PATH=/mosquitto/certs/ca.crt

# Certificate Validation
REQUIRE_CLIENT_CERT=false
VERIFY_CLIENT_CERT=false

# MONITORING & LOGGING
# =================================================================
# Health Check Settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_PROMETHEUS=false

# Log Configuration
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/mqtt-admin.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# DEVICE CONFIGURATION
# =================================================================
# Device Management
MAX_DEVICES_PER_SITE=1000
DEVICE_TIMEOUT_MINUTES=5
HEARTBEAT_INTERVAL_SECONDS=60

# Provisioning
PROVISION_TOKEN_EXPIRY_HOURS=24
MAX_PROVISION_ATTEMPTS=3

# PERFORMANCE SETTINGS
# =================================================================
# Connection Limits
MAX_MQTT_CONNECTIONS=1200
MAX_CONCURRENT_CONNECTIONS=100
CONNECTION_TIMEOUT_SECONDS=30

# Message Limits
MAX_MESSAGE_SIZE_MB=256
MAX_QUEUE_SIZE=1000
MAX_INFLIGHT_MESSAGES=100

# Cache Settings
CACHE_TTL_SECONDS=3600
CACHE_MAX_ENTRIES=10000

# DEVELOPMENT SETTINGS
# =================================================================
# Development Mode (set to false in production)
ENABLE_DEBUG_MODE=false
ENABLE_MOCK_DEVICES=false
ENABLE_TEST_ENDPOINTS=false

# Development Database
DEV_DATABASE_URL=postgresql://obedio_user:${POSTGRES_PASSWORD}@localhost:5432/obedio_dev

# BACKUP & MAINTENANCE
# =================================================================
# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Log Rotation
LOG_ROTATION_ENABLED=true
LOG_ROTATION_SCHEDULE=0 0 * * *  # Daily at midnight

# INTEGRATION SETTINGS
# =================================================================
# External Services
WEBHOOK_URL=
WEBHOOK_SECRET=
WEBHOOK_ENABLED=false

# Email Notifications
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@obedio.com

# DOCKER SPECIFIC
# =================================================================
# Volume Paths (for host bind mounts)
POSTGRES_DATA_PATH=./docker/volumes/postgres
REDIS_DATA_PATH=./docker/volumes/redis
MOSQUITTO_DATA_PATH=./docker/volumes/mosquitto/data
MOSQUITTO_LOGS_PATH=./docker/volumes/mosquitto/logs

# Network Configuration
DOCKER_NETWORK_SUBNET=172.20.0.0/16
DOCKER_NETWORK_GATEWAY=172.20.0.1

# =================================================================
# PRODUCTION SECURITY CHECKLIST
# =================================================================
# 
# Before deploying to production, ensure you:
# 
# 1. Change all default passwords
# 2. Generate secure random values for:
#    - POSTGRES_PASSWORD
#    - JWT_SECRET
#    - ENCRYPTION_KEY
#    - API_KEY
#    - MQTT_PASSWORD
# 
# 3. Set ENABLE_API_AUTH=true
# 4. Set ENABLE_TLS=true if using SSL
# 5. Set NODE_ENV=production
# 6. Set ENABLE_DEBUG_MODE=false
# 7. Set ENABLE_TEST_ENDPOINTS=false
# 8. Configure proper SSL certificates
# 9. Set up proper firewall rules
# 10. Configure backup strategy
# 
# =================================================================